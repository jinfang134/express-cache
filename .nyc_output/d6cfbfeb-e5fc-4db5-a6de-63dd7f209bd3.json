{"/home/jinfang/source-code/express-cache/src/public-api.ts":{"path":"/home/jinfang/source-code/express-cache/src/public-api.ts","statementMap":{"0":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"1":{"start":{"line":6,"column":16},"end":{"line":6,"column":32}},"2":{"start":{"line":7,"column":23},"end":{"line":7,"column":54}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":51}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":49}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":45}},"7":{"start":{"line":12,"column":27},"end":{"line":12,"column":76}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":69}},"9":{"start":{"line":14,"column":22},"end":{"line":14,"column":52}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":58}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":54}},"12":{"start":{"line":17,"column":20},"end":{"line":17,"column":53}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":44}},"14":{"start":{"line":19,"column":20},"end":{"line":19,"column":53}},"15":{"start":{"line":20,"column":0},"end":{"line":20,"column":48}},"16":{"start":{"line":21,"column":21},"end":{"line":21,"column":64}},"17":{"start":{"line":22,"column":0},"end":{"line":22,"column":65}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":54}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/public-api.ts","sources":["/home/jinfang/source-code/express-cache/src/public-api.ts"],"names":[],"mappings":";AAAA;;GAEG;;;AAEH,uDAAoF;AAA3E,uCAAA,WAAW,CAAA;AAAE,qCAAA,SAAS,CAAA;AAAE,sCAAA,UAAU,CAAA;AAAE,oCAAA,QAAQ,CAAA;AAErD,6EAA4E;AAAnE,kDAAA,kBAAkB,CAAA;AAC3B,qDAAqE;AAA5D,0CAAA,eAAe,CAAA;AAAE,wCAAA,aAAa,CAAA;AAEvC,sDAAmD;AAA1C,kCAAA,SAAS,CAAA;AAClB,sDAAqD;AAA5C,oCAAA,WAAW,CAAA;AACpB,iEAAuE;AAA9D,6CAAA,mBAAmB,CAAA;AAC5B,sDAA2B","sourcesContent":["/*\n * Public API Surface of cache\n */\n\nexport { CacheConfig, Cacheable, CacheEvict, CachePut } from './lib/CacheDecorator';\nexport { CacheManager } from './lib/cache-manager/CacheManager';\nexport { SimpleCacheManager } from './lib/cache-manager/SimpleCacheManager';\nexport { getCacheManager, EnableCaching } from './lib/CacheInstance';\nexport { Cache } from './lib/CacheModel';\nexport { NoOpCache } from './lib/impl/no-op-cache';\nexport { MemoryCache } from './lib/impl/MemoryCache';\nexport { DefaultKeyGenerator } from './lib/key-generator/KeyGenerator';\nexport * from './lib/utils'"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"22e9ced0424e61d25d051f47df6037a3686012d3","contentHash":"217182f72432277854f88e1076c2777ca73ebf5c2f0d2f35d3de134f76240332"},"/home/jinfang/source-code/express-cache/src/lib/CacheDecorator.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/CacheDecorator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":24},"end":{"line":5,"column":50}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":34}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":48}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"8":{"start":{"line":11,"column":4},"end":{"line":13,"column":6}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":87}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"12":{"start":{"line":18,"column":4},"end":{"line":27,"column":6}},"13":{"start":{"line":19,"column":31},"end":{"line":19,"column":47}},"14":{"start":{"line":20,"column":8},"end":{"line":25,"column":10}},"15":{"start":{"line":21,"column":26},"end":{"line":21,"column":50}},"16":{"start":{"line":22,"column":28},"end":{"line":22,"column":63}},"17":{"start":{"line":23,"column":29},"end":{"line":23,"column":113}},"18":{"start":{"line":24,"column":12},"end":{"line":24,"column":71}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":26}},"20":{"start":{"line":30,"column":4},"end":{"line":30,"column":38}},"21":{"start":{"line":31,"column":4},"end":{"line":62,"column":6}},"22":{"start":{"line":32,"column":31},"end":{"line":32,"column":47}},"23":{"start":{"line":33,"column":8},"end":{"line":60,"column":10}},"24":{"start":{"line":34,"column":12},"end":{"line":59,"column":15}},"25":{"start":{"line":35,"column":30},"end":{"line":35,"column":54}},"26":{"start":{"line":36,"column":32},"end":{"line":36,"column":67}},"27":{"start":{"line":37,"column":33},"end":{"line":37,"column":117}},"28":{"start":{"line":38,"column":31},"end":{"line":38,"column":50}},"29":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"30":{"start":{"line":40,"column":20},"end":{"line":40,"column":34}},"31":{"start":{"line":42,"column":16},"end":{"line":47,"column":17}},"32":{"start":{"line":43,"column":33},"end":{"line":43,"column":45}},"33":{"start":{"line":44,"column":20},"end":{"line":46,"column":21}},"34":{"start":{"line":45,"column":24},"end":{"line":45,"column":38}},"35":{"start":{"line":48,"column":31},"end":{"line":48,"column":63}},"36":{"start":{"line":49,"column":16},"end":{"line":57,"column":17}},"37":{"start":{"line":50,"column":20},"end":{"line":53,"column":23}},"38":{"start":{"line":51,"column":24},"end":{"line":51,"column":50}},"39":{"start":{"line":52,"column":24},"end":{"line":52,"column":36}},"40":{"start":{"line":55,"column":21},"end":{"line":57,"column":17}},"41":{"start":{"line":56,"column":20},"end":{"line":56,"column":48}},"42":{"start":{"line":58,"column":16},"end":{"line":58,"column":30}},"43":{"start":{"line":61,"column":8},"end":{"line":61,"column":26}},"44":{"start":{"line":64,"column":0},"end":{"line":64,"column":30}},"45":{"start":{"line":66,"column":4},"end":{"line":66,"column":38}},"46":{"start":{"line":67,"column":4},"end":{"line":86,"column":6}},"47":{"start":{"line":68,"column":31},"end":{"line":68,"column":47}},"48":{"start":{"line":69,"column":8},"end":{"line":84,"column":10}},"49":{"start":{"line":70,"column":26},"end":{"line":70,"column":50}},"50":{"start":{"line":71,"column":28},"end":{"line":71,"column":63}},"51":{"start":{"line":72,"column":29},"end":{"line":72,"column":113}},"52":{"start":{"line":73,"column":27},"end":{"line":73,"column":59}},"53":{"start":{"line":74,"column":12},"end":{"line":82,"column":13}},"54":{"start":{"line":75,"column":16},"end":{"line":78,"column":19}},"55":{"start":{"line":76,"column":20},"end":{"line":76,"column":46}},"56":{"start":{"line":77,"column":20},"end":{"line":77,"column":32}},"57":{"start":{"line":80,"column":17},"end":{"line":82,"column":13}},"58":{"start":{"line":81,"column":16},"end":{"line":81,"column":44}},"59":{"start":{"line":83,"column":12},"end":{"line":83,"column":26}},"60":{"start":{"line":85,"column":8},"end":{"line":85,"column":26}},"61":{"start":{"line":88,"column":0},"end":{"line":88,"column":28}},"62":{"start":{"line":90,"column":4},"end":{"line":90,"column":38}},"63":{"start":{"line":91,"column":4},"end":{"line":119,"column":6}},"64":{"start":{"line":92,"column":31},"end":{"line":92,"column":47}},"65":{"start":{"line":93,"column":8},"end":{"line":117,"column":10}},"66":{"start":{"line":94,"column":12},"end":{"line":116,"column":15}},"67":{"start":{"line":95,"column":30},"end":{"line":95,"column":54}},"68":{"start":{"line":96,"column":32},"end":{"line":96,"column":67}},"69":{"start":{"line":97,"column":33},"end":{"line":97,"column":117}},"70":{"start":{"line":98,"column":16},"end":{"line":105,"column":17}},"71":{"start":{"line":99,"column":20},"end":{"line":104,"column":21}},"72":{"start":{"line":100,"column":24},"end":{"line":100,"column":44}},"73":{"start":{"line":103,"column":24},"end":{"line":103,"column":52}},"74":{"start":{"line":106,"column":31},"end":{"line":106,"column":63}},"75":{"start":{"line":107,"column":16},"end":{"line":114,"column":17}},"76":{"start":{"line":108,"column":20},"end":{"line":113,"column":21}},"77":{"start":{"line":109,"column":24},"end":{"line":109,"column":44}},"78":{"start":{"line":112,"column":24},"end":{"line":112,"column":52}},"79":{"start":{"line":115,"column":16},"end":{"line":115,"column":30}},"80":{"start":{"line":118,"column":8},"end":{"line":118,"column":26}},"81":{"start":{"line":121,"column":0},"end":{"line":121,"column":32}},"82":{"start":{"line":124,"column":4},"end":{"line":126,"column":5}},"83":{"start":{"line":125,"column":8},"end":{"line":125,"column":110}},"84":{"start":{"line":127,"column":18},"end":{"line":127,"column":71}},"85":{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},"86":{"start":{"line":129,"column":8},"end":{"line":129,"column":89}},"87":{"start":{"line":131,"column":4},"end":{"line":131,"column":17}},"88":{"start":{"line":135,"column":4},"end":{"line":137,"column":26}},"89":{"start":{"line":140,"column":22},"end":{"line":140,"column":49}},"90":{"start":{"line":141,"column":4},"end":{"line":143,"column":5}},"91":{"start":{"line":142,"column":8},"end":{"line":142,"column":18}},"92":{"start":{"line":144,"column":19},"end":{"line":144,"column":21}},"93":{"start":{"line":145,"column":4},"end":{"line":147,"column":5}},"94":{"start":{"line":145,"column":17},"end":{"line":145,"column":18}},"95":{"start":{"line":146,"column":8},"end":{"line":146,"column":39}},"96":{"start":{"line":148,"column":4},"end":{"line":148,"column":18}}},"fnMap":{"0":{"name":"CacheConfig","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":20}},"loc":{"start":{"line":10,"column":32},"end":{"line":14,"column":1}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":11},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":23},"end":{"line":13,"column":5}},"line":11},"2":{"name":"CacheAction","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":20}},"loc":{"start":{"line":16,"column":37},"end":{"line":28,"column":1}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":11},"end":{"line":18,"column":12}},"loc":{"start":{"line":18,"column":48},"end":{"line":27,"column":5}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":27},"end":{"line":20,"column":28}},"loc":{"start":{"line":20,"column":40},"end":{"line":25,"column":9}},"line":20},"5":{"name":"Cacheable","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":27},"end":{"line":63,"column":1}},"line":29},"6":{"name":"(anonymous_6)","decl":{"start":{"line":31,"column":11},"end":{"line":31,"column":12}},"loc":{"start":{"line":31,"column":48},"end":{"line":62,"column":5}},"line":31},"7":{"name":"(anonymous_7)","decl":{"start":{"line":33,"column":27},"end":{"line":33,"column":28}},"loc":{"start":{"line":33,"column":46},"end":{"line":60,"column":9}},"line":33},"8":{"name":"(anonymous_8)","decl":{"start":{"line":34,"column":59},"end":{"line":34,"column":60}},"loc":{"start":{"line":34,"column":72},"end":{"line":59,"column":13}},"line":34},"9":{"name":"(anonymous_9)","decl":{"start":{"line":50,"column":32},"end":{"line":50,"column":33}},"loc":{"start":{"line":50,"column":42},"end":{"line":53,"column":21}},"line":50},"10":{"name":"CachePut","decl":{"start":{"line":65,"column":9},"end":{"line":65,"column":17}},"loc":{"start":{"line":65,"column":26},"end":{"line":87,"column":1}},"line":65},"11":{"name":"(anonymous_11)","decl":{"start":{"line":67,"column":11},"end":{"line":67,"column":12}},"loc":{"start":{"line":67,"column":48},"end":{"line":86,"column":5}},"line":67},"12":{"name":"(anonymous_12)","decl":{"start":{"line":69,"column":27},"end":{"line":69,"column":28}},"loc":{"start":{"line":69,"column":46},"end":{"line":84,"column":9}},"line":69},"13":{"name":"(anonymous_13)","decl":{"start":{"line":75,"column":28},"end":{"line":75,"column":29}},"loc":{"start":{"line":75,"column":38},"end":{"line":78,"column":17}},"line":75},"14":{"name":"CacheEvict","decl":{"start":{"line":89,"column":9},"end":{"line":89,"column":19}},"loc":{"start":{"line":89,"column":28},"end":{"line":120,"column":1}},"line":89},"15":{"name":"(anonymous_15)","decl":{"start":{"line":91,"column":11},"end":{"line":91,"column":12}},"loc":{"start":{"line":91,"column":48},"end":{"line":119,"column":5}},"line":91},"16":{"name":"(anonymous_16)","decl":{"start":{"line":93,"column":27},"end":{"line":93,"column":28}},"loc":{"start":{"line":93,"column":46},"end":{"line":117,"column":9}},"line":93},"17":{"name":"(anonymous_17)","decl":{"start":{"line":94,"column":59},"end":{"line":94,"column":60}},"loc":{"start":{"line":94,"column":72},"end":{"line":116,"column":13}},"line":94},"18":{"name":"getCache","decl":{"start":{"line":122,"column":9},"end":{"line":122,"column":17}},"loc":{"start":{"line":122,"column":34},"end":{"line":132,"column":1}},"line":122},"19":{"name":"getDefaultParams","decl":{"start":{"line":133,"column":9},"end":{"line":133,"column":25}},"loc":{"start":{"line":133,"column":39},"end":{"line":138,"column":1}},"line":133},"20":{"name":"getArgsObject","decl":{"start":{"line":139,"column":9},"end":{"line":139,"column":22}},"loc":{"start":{"line":139,"column":35},"end":{"line":149,"column":1}},"line":139}},"branchMap":{"0":{"loc":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"type":"if","locations":[{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},{"start":{"line":39,"column":16},"end":{"line":41,"column":17}}],"line":39},"1":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":56}},"type":"binary-expr","locations":[{"start":{"line":39,"column":20},"end":{"line":39,"column":46}},{"start":{"line":39,"column":50},"end":{"line":39,"column":56}}],"line":39},"2":{"loc":{"start":{"line":42,"column":16},"end":{"line":47,"column":17}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":47,"column":17}},{"start":{"line":42,"column":16},"end":{"line":47,"column":17}}],"line":42},"3":{"loc":{"start":{"line":44,"column":20},"end":{"line":46,"column":21}},"type":"if","locations":[{"start":{"line":44,"column":20},"end":{"line":46,"column":21}},{"start":{"line":44,"column":20},"end":{"line":46,"column":21}}],"line":44},"4":{"loc":{"start":{"line":49,"column":16},"end":{"line":57,"column":17}},"type":"if","locations":[{"start":{"line":49,"column":16},"end":{"line":57,"column":17}},{"start":{"line":49,"column":16},"end":{"line":57,"column":17}}],"line":49},"5":{"loc":{"start":{"line":55,"column":21},"end":{"line":57,"column":17}},"type":"if","locations":[{"start":{"line":55,"column":21},"end":{"line":57,"column":17}},{"start":{"line":55,"column":21},"end":{"line":57,"column":17}}],"line":55},"6":{"loc":{"start":{"line":74,"column":12},"end":{"line":82,"column":13}},"type":"if","locations":[{"start":{"line":74,"column":12},"end":{"line":82,"column":13}},{"start":{"line":74,"column":12},"end":{"line":82,"column":13}}],"line":74},"7":{"loc":{"start":{"line":80,"column":17},"end":{"line":82,"column":13}},"type":"if","locations":[{"start":{"line":80,"column":17},"end":{"line":82,"column":13}},{"start":{"line":80,"column":17},"end":{"line":82,"column":13}}],"line":80},"8":{"loc":{"start":{"line":98,"column":16},"end":{"line":105,"column":17}},"type":"if","locations":[{"start":{"line":98,"column":16},"end":{"line":105,"column":17}},{"start":{"line":98,"column":16},"end":{"line":105,"column":17}}],"line":98},"9":{"loc":{"start":{"line":99,"column":20},"end":{"line":104,"column":21}},"type":"if","locations":[{"start":{"line":99,"column":20},"end":{"line":104,"column":21}},{"start":{"line":99,"column":20},"end":{"line":104,"column":21}}],"line":99},"10":{"loc":{"start":{"line":107,"column":16},"end":{"line":114,"column":17}},"type":"if","locations":[{"start":{"line":107,"column":16},"end":{"line":114,"column":17}},{"start":{"line":107,"column":16},"end":{"line":114,"column":17}}],"line":107},"11":{"loc":{"start":{"line":108,"column":20},"end":{"line":113,"column":21}},"type":"if","locations":[{"start":{"line":108,"column":20},"end":{"line":113,"column":21}},{"start":{"line":108,"column":20},"end":{"line":113,"column":21}}],"line":108},"12":{"loc":{"start":{"line":124,"column":4},"end":{"line":126,"column":5}},"type":"if","locations":[{"start":{"line":124,"column":4},"end":{"line":126,"column":5}},{"start":{"line":124,"column":4},"end":{"line":126,"column":5}}],"line":124},"13":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":36}},"type":"binary-expr","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":15}},{"start":{"line":124,"column":19},"end":{"line":124,"column":36}}],"line":124},"14":{"loc":{"start":{"line":125,"column":20},"end":{"line":125,"column":109}},"type":"binary-expr","locations":[{"start":{"line":125,"column":20},"end":{"line":125,"column":96}},{"start":{"line":125,"column":100},"end":{"line":125,"column":109}}],"line":125},"15":{"loc":{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},"type":"if","locations":[{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},{"start":{"line":128,"column":4},"end":{"line":130,"column":5}}],"line":128},"16":{"loc":{"start":{"line":137,"column":7},"end":{"line":137,"column":24}},"type":"binary-expr","locations":[{"start":{"line":137,"column":7},"end":{"line":137,"column":18}},{"start":{"line":137,"column":22},"end":{"line":137,"column":24}}],"line":137},"17":{"loc":{"start":{"line":141,"column":4},"end":{"line":143,"column":5}},"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":143,"column":5}},{"start":{"line":141,"column":4},"end":{"line":143,"column":5}}],"line":141}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/CacheDecorator.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/CacheDecorator.ts"],"names":[],"mappings":"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","sourcesContent":["import 'reflect-metadata/Reflect';\nimport { getCacheManager, getKeyGenerator } from './CacheInstance';\nimport { Cache } from './CacheModel';\nimport { getParamNames, isPromise } from './utils';\n\nexport const METADATA_KEY_CACHE_DEFAULTS = '_cache_defaults';\nexport const METADATA_KEY_CACHE_KEYS = '_cache_keys';\nexport const METADATA_KEY_CACHE_VALUE = '_cache_value';\n\n\nexport interface CacheParams {\n  cacheName?: string;\n  key?: string;\n}\n\nexport interface CacheEvictParams extends CacheParams {\n  afterInvocation?: boolean;\n  allEntries?: boolean;\n}\n\nexport interface CacheableParams extends CacheParams {\n  ttl?: number // second\n}\n\n\nexport function CacheConfig(cacheName: string): ClassDecorator {\n  return (target: any): void => {\n    Reflect.defineMetadata(METADATA_KEY_CACHE_DEFAULTS, cacheName, target);\n  };\n}\n\nfunction CacheAction<T extends CacheParams>(action: (originTarget, cache, cacheKey, originalMethod, args) => {}, params?: T): MethodDecorator {\n  params = getDefaultParams(params);\n  return (target: any, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> => {\n    const originalMethod = descriptor.value;\n    descriptor.value = (...args: any[]) => {\n      const cache: Cache = getCache(target, params);\n      const argsObj: any = getArgsObject(originalMethod, args)\n      const cacheKey: string = getKeyGenerator().generate(target, propertyKey, argsObj, params.key);\n      return action(this, cache, cacheKey, originalMethod, args);\n    };\n    return descriptor;\n  };\n}\n\nexport function Cacheable(params?: CacheableParams): MethodDecorator {\n  params = getDefaultParams(params);\n  return (target: any, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> => {\n    const originalMethod = descriptor.value;\n    descriptor.value = async function (...args: any[]) {\n      const cache: Cache = getCache(target, params);\n      const argsObj: any = getArgsObject(originalMethod, args)\n      const cacheKey: string = getKeyGenerator().generate(target, propertyKey, argsObj, params.key);\n      const oldVal: any = cache.get(cacheKey);\n      if (!isPromise(oldVal) && oldVal) {\n        return oldVal;\n      }\n      if (isPromise(oldVal)) {\n        const data = await oldVal\n        if (data !== undefined) {\n          return oldVal;\n        }\n      }\n      const result = originalMethod.apply(this, args);\n      if (isPromise(result)) {\n        result.then((data) => {\n          cache.put(cacheKey, data)\n          return data;\n        })\n      } else if (result !== undefined) {\n        cache.put(cacheKey, result)\n      }\n      return result;\n    };\n    return descriptor;\n  };\n\n}\n\n\nexport function CachePut(params?: CacheableParams): MethodDecorator {\n  params = getDefaultParams(params);\n  return (target: any, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> => {\n    const originalMethod = descriptor.value;\n    descriptor.value = function (...args: any[]) {\n      const cache: Cache = getCache(target, params);\n      const argsObj: any = getArgsObject(originalMethod, args)\n      const cacheKey: string = getKeyGenerator().generate(target, propertyKey, argsObj, params.key);\n      const result: any = originalMethod.apply(this, args);\n      if (isPromise(result)) {\n        result.then((data) => {\n          cache.put(cacheKey, data)\n          return data\n        })\n      } else if (result !== undefined) {\n        cache.put(cacheKey, result)\n      }\n      return result;\n    };\n    return descriptor;\n  };\n\n\n}\n\nexport function CacheEvict(params?: CacheEvictParams): MethodDecorator {\n  params = getDefaultParams(params);\n  return (target: any, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> => {\n    const originalMethod = descriptor.value;\n    descriptor.value = async function (...args: any[]) {\n      const cache: Cache = getCache(target, params);\n      const argsObj: any = getArgsObject(originalMethod, args)\n      const cacheKey: string = getKeyGenerator().generate(target, propertyKey, argsObj, params.key);\n      if (!params.afterInvocation) {\n        if (params.allEntries) {\n          await cache.clear()\n        } else {\n          await cache.evict(cacheKey);\n        }\n      }\n      const result: any = originalMethod.apply(this, args);\n      if (params.afterInvocation) {\n        if (params.allEntries) {\n          await cache.clear()\n        } else {\n          await cache.evict(cacheKey);\n        }\n      }\n      return result;\n    };\n    return descriptor;\n  };\n\n}\n\n\nfunction getCache(target: any, params: CacheParams): Cache {\n  let cacheName: string\n  if (!params || !params.cacheName) {\n    cacheName = Reflect.getMetadata(METADATA_KEY_CACHE_DEFAULTS, target.constructor) || 'default';\n  }\n  const cache: Cache = getCacheManager().getCache(cacheName);\n  if (!cache) {\n    throw new Error(`Cache '${cacheName}' not found for ${target.constructor.name}`);\n  }\n  return cache;\n}\n\nfunction getDefaultParams<T>(cacheParams: CacheParams): T {\n  // @ts-ignore\n  return Object.assign({\n    afterInvocation: true\n  }, cacheParams || {});\n}\n\n\nfunction getArgsObject(func: () => {}, args: any[]) {\n  const paramName = getParamNames(func);\n  if (paramName.length === 0) {\n    return {}\n  }\n  const result = {}\n  for (let i = 0; i < paramName.length; i++) {\n    result[paramName[i]] = args[i]\n  }\n  return result;\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e271363d9627daf854abd8b44bbcd48687a8a93b","contentHash":"b7abc58590a6b059af99c704b11bbc2929d5b3f988352296d14d2d873d155d1f"},"/home/jinfang/source-code/express-cache/src/lib/CacheInstance.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/CacheInstance.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":27},"end":{"line":4,"column":70}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":53}},"4":{"start":{"line":6,"column":27},"end":{"line":6,"column":70}},"5":{"start":{"line":7,"column":23},"end":{"line":11,"column":1}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":75}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"8":{"start":{"line":18,"column":4},"end":{"line":18,"column":99}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":69}},"10":{"start":{"line":20,"column":25},"end":{"line":20,"column":47}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":85}},"12":{"start":{"line":23,"column":0},"end":{"line":23,"column":38}},"13":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"14":{"start":{"line":26,"column":8},"end":{"line":26,"column":74}},"15":{"start":{"line":28,"column":4},"end":{"line":28,"column":39}},"16":{"start":{"line":30,"column":0},"end":{"line":30,"column":42}},"17":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"18":{"start":{"line":33,"column":8},"end":{"line":33,"column":69}},"19":{"start":{"line":35,"column":4},"end":{"line":35,"column":34}},"20":{"start":{"line":37,"column":0},"end":{"line":37,"column":42}}},"fnMap":{"0":{"name":"createCache","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":20}},"loc":{"start":{"line":12,"column":27},"end":{"line":15,"column":1}},"line":12},"1":{"name":"EnableCaching","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":22}},"loc":{"start":{"line":17,"column":31},"end":{"line":22,"column":1}},"line":17},"2":{"name":"getKeyGenerator","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":24}},"loc":{"start":{"line":24,"column":27},"end":{"line":29,"column":1}},"line":24},"3":{"name":"getCacheManager","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":27},"end":{"line":36,"column":1}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":34},"end":{"line":18,"column":98}},"type":"binary-expr","locations":[{"start":{"line":18,"column":34},"end":{"line":18,"column":53}},{"start":{"line":18,"column":57},"end":{"line":18,"column":98}}],"line":18},"1":{"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":68}},"type":"binary-expr","locations":[{"start":{"line":19,"column":27},"end":{"line":19,"column":39}},{"start":{"line":19,"column":43},"end":{"line":19,"column":68}}],"line":19},"2":{"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},{"start":{"line":25,"column":4},"end":{"line":27,"column":5}}],"line":25},"3":{"loc":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},{"start":{"line":32,"column":4},"end":{"line":34,"column":5}}],"line":32}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/CacheInstance.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/CacheInstance.ts"],"names":[],"mappings":";;AACA,oDAAiD;AAEjD,uEAAoE;AAEpE,sDAAmD;AACnD,uEAAoE;AAEpE,MAAM,cAAc,GAAG;IACrB,OAAO,EAAE,SAAS;IAClB,YAAY,EAAE,SAAS;IACvB,KAAK,EAAE,SAAS;CACjB,CAAC;AAGF,SAAgB,WAAW,CAAC,IAAY;IACtC,OAAO,IAAI,2BAAY,CAAC,IAAI,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;IACxD,yCAAyC;AAC3C,CAAC;AAHD,kCAGC;AAED,SAAgB,aAAa,CAAC,MAAmB;IAC/C,cAAc,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,IAAI,IAAI,mCAAgB,EAAE,CAAC;IAC5E,cAAc,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,IAAI,yBAAW,CAAA;IAClD,MAAM,YAAY,GAAU,WAAW,CAAC,SAAS,CAAC,CAAA;IAClD,cAAc,CAAC,OAAO,GAAG,IAAI,mCAAgB,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;AAChE,CAAC;AALD,sCAKC;AAED,SAAgB,eAAe;IAC7B,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE;QAChC,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAA;KAClE;IACD,OAAO,cAAc,CAAC,YAAY,CAAC;AACrC,CAAC;AALD,0CAKC;AAED,SAAgB,eAAe;IAC7B,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE;QAC3B,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;KAC9D;IACD,OAAO,cAAc,CAAC,OAAO,CAAC;AAChC,CAAC;AALD,0CAKC","sourcesContent":["import { CacheManager } from './cache-manager/CacheManager';\nimport { MemoryCache } from './impl/MemoryCache';\nimport { Cache, CacheConfig } from './CacheModel';\nimport { AutoCacheManager } from './cache-manager/AutoCacheManager';\nimport { DefaultKeyGenerator } from './key-generator/KeyGenerator';\nimport { LoggingCache } from './impl/LoggingCache';\nimport { HashKeyGenerator } from './key-generator/HashKeyGenerator';\n\nconst CACHE_INSTANCE = {\n  manager: undefined,\n  keyGenerator: undefined,\n  cache: undefined\n};\n\n\nexport function createCache(name: string): Cache {\n  return new LoggingCache(new CACHE_INSTANCE.cache(name));\n  // return new CACHE_INSTANCE.cache(name);\n}\n\nexport function EnableCaching(config: CacheConfig) {\n  CACHE_INSTANCE.keyGenerator = config.keyGenerator || new HashKeyGenerator();\n  CACHE_INSTANCE.cache = config.cache || MemoryCache\n  const defaultCache: Cache = createCache('default')\n  CACHE_INSTANCE.manager = new AutoCacheManager([defaultCache]);\n}\n\nexport function getKeyGenerator() {\n  if (!CACHE_INSTANCE.keyGenerator) {\n    throw new Error('No cache key generator found, initCache before')\n  }\n  return CACHE_INSTANCE.keyGenerator;\n}\n\nexport function getCacheManager(): CacheManager {\n  if (!CACHE_INSTANCE.manager) {\n    throw new Error('No cache found, `initCacheManager` before');\n  }\n  return CACHE_INSTANCE.manager;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"470f9c8266a8a1cb90781a342722e24fb879ede6","contentHash":"307ba9ffd8f7e9c7f6707337f40820d7c782e8ac060f6d30620a76dc0af18d82"},"/home/jinfang/source-code/express-cache/src/lib/impl/MemoryCache.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/impl/MemoryCache.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":31}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":25}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":45}},"4":{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},"5":{"start":{"line":15,"column":8},"end":{"line":15,"column":31}},"6":{"start":{"line":18,"column":8},"end":{"line":18,"column":35}},"7":{"start":{"line":21,"column":8},"end":{"line":21,"column":35}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":22},"end":{"line":7,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":11},"end":{"line":10,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":12},"end":{"line":13,"column":5}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":15},"end":{"line":16,"column":5}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":13},"end":{"line":19,"column":5}},"line":17},"5":{"name":"(anonymous_5)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":20},"end":{"line":22,"column":5}},"line":20}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/impl/MemoryCache.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/impl/MemoryCache.ts"],"names":[],"mappings":";;AAEA,MAAa,WAAW;IAKtB,YAAY,IAAY;QAFhB,UAAK,GAAqB,IAAI,GAAG,EAAe,CAAC;QAGvD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IACD,IAAI;QACF,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;IACvC,CAAC;IAED,KAAK;QACH,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,GAAW;QACf,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,GAAG,CAAI,GAAW;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,GAAG,CAAI,GAAW,EAAE,KAAQ;QAC1B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;CAEF;AA5BD,kCA4BC","sourcesContent":["import { Cache } from '../CacheModel';\n\nexport class MemoryCache implements Cache {\n\n  readonly name: string;\n  private cache: Map<string, any> = new Map<string, any>();\n\n  constructor(name: string) {\n    this.name = name;\n  }\n  keys(): string[] | Promise<string[]> {\n    return Array.from(this.cache.keys());\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n\n  evict(key: string): void {\n    this.cache.delete(key);\n  }\n\n  get<T>(key: string): T {\n    return this.cache.get(key);\n  }\n\n  put<T>(key: string, value: T): void {\n    this.cache.set(key, value);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5ae953e439b7d3318748be422c7d8e8b9d96df2c","contentHash":"20bae4795c55ba719cd012dcf16d402ec354a19a85376e8ad7384d1be745c734"},"/home/jinfang/source-code/express-cache/src/lib/cache-manager/AutoCacheManager.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/cache-manager/AutoCacheManager.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":29},"end":{"line":3,"column":60}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":51}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":75}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":37}},"5":{"start":{"line":13,"column":20},"end":{"line":13,"column":47}},"6":{"start":{"line":14,"column":8},"end":{"line":17,"column":9}},"7":{"start":{"line":15,"column":12},"end":{"line":15,"column":54}},"8":{"start":{"line":16,"column":12},"end":{"line":16,"column":33}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":21}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":44}},"11":{"start":{"line":24,"column":0},"end":{"line":24,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":24},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":20},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":19},"end":{"line":19,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":20},"end":{"line":22,"column":5}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":17,"column":9}},{"start":{"line":14,"column":8},"end":{"line":17,"column":9}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/cache-manager/AutoCacheManager.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/cache-manager/AutoCacheManager.ts"],"names":[],"mappings":";;AAEA,6DAA0D;AAC1D,oDAA+C;AAE/C,MAAa,gBAAgB;IAGzB,YAAY,MAAgB;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,uCAAkB,CAAC,MAAM,CAAC,CAAC;IAClD,CAAC;IACD,QAAQ,CAAC,KAAY;QACjB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAED,QAAQ,CAAC,IAAY;QACjB,IAAI,KAAK,GAAU,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;QAC9C,IAAI,KAAK,IAAI,IAAI,EAAE;YACf,KAAK,GAAG,2BAAW,CAAC,IAAI,CAAC,CAAC;YAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SACxB;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;CAEJ;AAvBD,4CAuBC","sourcesContent":["import { CacheManager } from './CacheManager';\nimport { Cache } from '../CacheModel';\nimport { SimpleCacheManager } from './SimpleCacheManager';\nimport { createCache } from '../CacheInstance';\n\nexport class AutoCacheManager implements CacheManager {\n    private readonly manager: CacheManager;\n\n    constructor(caches?: Cache[]) {\n        this.manager = new SimpleCacheManager(caches);\n    }\n    addCache(cache: Cache): void {\n        this.manager.addCache(cache);\n    }\n\n    getCache(name: string): Cache {\n        let cache: Cache = this.manager.getCache(name)\n        if (cache == null) {\n            cache = createCache(name);\n            this.addCache(cache);\n        }\n        return cache;\n    }\n\n    getCacheNames(): string[] {\n        return this.manager.getCacheNames();\n    }\n\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ad4cfa307b476e0d397179becd4e01149e88d88a","contentHash":"acc0a8b3c99b953967ce683f03cf5c6a32bbc748c6e6867d686b696d3b7e34ca"},"/home/jinfang/source-code/express-cache/src/lib/cache-manager/SimpleCacheManager.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/cache-manager/SimpleCacheManager.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":31}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":48}},"3":{"start":{"line":11,"column":8},"end":{"line":11,"column":47}},"4":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"5":{"start":{"line":15,"column":12},"end":{"line":15,"column":50}},"6":{"start":{"line":17,"column":8},"end":{"line":17,"column":45}},"7":{"start":{"line":20,"column":8},"end":{"line":20,"column":34}},"8":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":58}},"10":{"start":{"line":22,"column":36},"end":{"line":22,"column":56}},"11":{"start":{"line":26,"column":0},"end":{"line":26,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":24},"end":{"line":6,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":20},"end":{"line":9,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":19},"end":{"line":12,"column":5}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":20},"end":{"line":18,"column":5}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":22},"end":{"line":24,"column":5}},"line":19},"5":{"name":"(anonymous_5)","decl":{"start":{"line":22,"column":27},"end":{"line":22,"column":28}},"loc":{"start":{"line":22,"column":36},"end":{"line":22,"column":56}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":46}},"type":"binary-expr","locations":[{"start":{"line":11,"column":15},"end":{"line":11,"column":38}},{"start":{"line":11,"column":42},"end":{"line":11,"column":46}}],"line":11},"1":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"2":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/cache-manager/SimpleCacheManager.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/cache-manager/SimpleCacheManager.ts"],"names":[],"mappings":";;AAGA,MAAa,kBAAkB;IAG7B,YAAY,MAAgB;QAC1B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACzB,CAAC;IAED,aAAa;QACX,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;IAC1C,CAAC;IAED,QAAQ,CAAC,IAAY;QACnB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;IACzC,CAAC;IAED,QAAQ,CAAC,KAAY;QACnB,IAAI,CAAC,KAAK,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;SACvC;QACD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IACvC,CAAC;IAED,SAAS,CAAC,MAAe;QACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAiB,CAAC;QACzC,IAAI,MAAM,EAAE;YACV,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;SAC/C;IACH,CAAC;CACF;AA5BD,gDA4BC","sourcesContent":["import {CacheManager} from './CacheManager';\nimport {Cache} from '../CacheModel';\n\nexport class SimpleCacheManager implements CacheManager {\n  private cacheMap: Map<string, Cache>;\n\n  constructor(caches?: Cache[]) {\n    this.setCaches(caches);\n  }\n\n  getCacheNames(): string[] {\n    return Array.from(this.cacheMap.keys());\n  }\n\n  getCache(name: string): Cache {\n    return this.cacheMap.get(name) || null;\n  }\n\n  addCache(cache: Cache): void {\n    if (!cache) {\n      throw new Error('Cache is undefined');\n    }\n    this.cacheMap.set(cache.name, cache);\n  }\n\n  setCaches(caches: Cache[]): void {\n    this.cacheMap = new Map<string, Cache>();\n    if (caches) {\n      caches.forEach(cache => this.addCache(cache));\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"26a833ee0dd0808c443c8bf3876e2dab1c131c20","contentHash":"56cdab2588d5134efbf2e60b44856a9bd8e9c80edce1bbd2e21c4149af9f0e3b"},"/home/jinfang/source-code/express-cache/src/lib/impl/LoggingCache.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/impl/LoggingCache.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":26}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":22}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":61}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":27}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":33}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":24}},"8":{"start":{"line":16,"column":22},"end":{"line":16,"column":41}},"9":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"10":{"start":{"line":18,"column":12},"end":{"line":18,"column":24}},"11":{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},"12":{"start":{"line":21,"column":12},"end":{"line":21,"column":93}},"13":{"start":{"line":22,"column":12},"end":{"line":22,"column":86}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":21}},"15":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":104}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":35}},"18":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"19":{"start":{"line":34,"column":12},"end":{"line":34,"column":60}},"20":{"start":{"line":36,"column":8},"end":{"line":36,"column":30}},"21":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"22":{"start":{"line":40,"column":12},"end":{"line":40,"column":54}},"23":{"start":{"line":42,"column":8},"end":{"line":42,"column":27}},"24":{"start":{"line":45,"column":8},"end":{"line":45,"column":41}},"25":{"start":{"line":48,"column":0},"end":{"line":48,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":23},"end":{"line":10,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":11},"end":{"line":13,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":13},"end":{"line":25,"column":5}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":20},"end":{"line":31,"column":5}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":15},"end":{"line":37,"column":5}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":12},"end":{"line":43,"column":5}},"line":38},"6":{"name":"(anonymous_6)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":18},"end":{"line":46,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},{"start":{"line":17,"column":8},"end":{"line":19,"column":9}}],"line":17},"1":{"loc":{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":23,"column":9}},{"start":{"line":20,"column":8},"end":{"line":23,"column":9}}],"line":20},"2":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"3":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33},"4":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/impl/LoggingCache.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/impl/LoggingCache.ts"],"names":[],"mappings":";;AAEA,MAAa,YAAY;IAQrB,YAAY,KAAY;QANd,aAAQ,GAAG,CAAC,CAAC;QACb,SAAI,GAAG,CAAC,CAAC;QACT,cAAS,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,KAAK,MAAM,CAAC;QAKtD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;IAC3B,CAAC;IACD,IAAI;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC;IAID,GAAG,CAAI,GAAW;QACd,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,MAAM,KAAK,GAAmB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QACjD,IAAI,KAAK,IAAI,IAAI,EAAE;YACf,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO,CAAC,GAAG,CAAC,6BAA6B,GAAG,YAAY,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAA;YAChF,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;SAC7E;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,GAAG,CAAI,GAAW,EAAE,KAAQ;QACxB,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO,CAAC,GAAG,CAAC,oBAAoB,IAAI,CAAC,IAAI,WAAW,GAAG,YAAY,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAA;SAC9F;QACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;IAC9B,CAAC;IACD,KAAK,CAAC,GAAW;QACb,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO,CAAC,GAAG,CAAC,cAAc,IAAI,CAAC,IAAI,MAAM,GAAG,EAAE,CAAC,CAAA;SAClD;QACD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IACzB,CAAC;IACD,KAAK;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO,CAAC,GAAG,CAAC,gBAAgB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAA;SAC5C;QACD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAA;IACtB,CAAC;IAEO,WAAW;QACf,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;IACrC,CAAC;CAEJ;AArDD,oCAqDC","sourcesContent":["import { Cache } from '../CacheModel';\n\nexport class LoggingCache implements Cache {\n    name: string;\n    protected requests = 0;\n    protected hits = 0;\n    protected logEnable = process.env.DEBUG_ENABLE === 'true';\n\n    private readonly cache: Cache;\n\n    constructor(cache: Cache) {\n        this.cache = cache;\n        this.name = cache.name;\n    }\n    keys(): string[] | Promise<string[]> {\n        return this.cache.keys();\n    }\n\n\n\n    get<T>(key: string): T | Promise<T> {\n        this.requests++;\n        const value: T | Promise<T> = this.cache.get(key)\n        if (value != null) {\n            this.hits++;\n        }\n        if (this.logEnable) {\n            console.log(`get data from cache, key: ${key}, value: ${JSON.stringify(value)}`)\n            console.log(\"Cache Hit Ratio [\" + this.name + \"]: \" + this.getHitRatio());\n        }\n        return value;\n    }\n    put<T>(key: string, value: T): void {\n        if (this.logEnable) {\n            console.log(`caching data in [${this.name}], key: ${key}, value: ${JSON.stringify(value)}`)\n        }\n        this.cache.put(key, value)\n    }\n    evict(key: string): void {\n        if (this.logEnable) {\n            console.log(`evict key [${this.name}]: ${key}`)\n        }\n        this.cache.evict(key)\n    }\n    clear(): void {\n        if (this.logEnable) {\n            console.log(`clear cache [${this.name}]`)\n        }\n        this.cache.clear()\n    }\n\n    private getHitRatio() {\n        return this.hits / this.requests;\n    }\n\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2bf4cc2030b510bb04e7f96dd379d10b8ca1a335","contentHash":"501099d365d96c0348a1eba13f411b9bebb2eb89f00fca71c478ab13af535e78"},"/home/jinfang/source-code/express-cache/src/lib/key-generator/HashKeyGenerator.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/key-generator/HashKeyGenerator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":3,"column":48}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":35}},"3":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":8,"column":85}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":40}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":45},"end":{"line":11,"column":5}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},{"start":{"line":7,"column":8},"end":{"line":9,"column":9}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/key-generator/HashKeyGenerator.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/key-generator/HashKeyGenerator.ts"],"names":[],"mappings":";;AAAA,iDAAoD;AACpD,oCAA+B;AAE/B,MAAa,gBAAiB,SAAQ,kCAAmB;IACrD,QAAQ,CAAC,MAAW,EAAE,WAA4B,EAAE,IAAS,EAAE,GAAY;QACvE,IAAI,CAAC,GAAG,EAAE;YACN,OAAO,WAAW,CAAC,QAAQ,EAAE,GAAE,GAAG,GAAE,YAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;SACjE;QACD,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;IACnC,CAAC;CACJ;AAPD,4CAOC","sourcesContent":["import { DefaultKeyGenerator } from './KeyGenerator'\nimport { hash } from '../utils'\n\nexport class HashKeyGenerator extends DefaultKeyGenerator {\n    generate(target: any, propertyKey: string | symbol, args: any, key?: string): string {\n        if (!key) {\n            return propertyKey.toString() +'_'+ hash(JSON.stringify(args))\n        }\n        return this.template(key, args)\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90fad95fb7834f7c7c99dbe5bcb2f29b3882cbd1","contentHash":"a7436211404f660a9c1da55f024fa0608dfb4fe14fa0a9ddd8cfb40b61799aca"},"/home/jinfang/source-code/express-cache/src/lib/key-generator/KeyGenerator.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/key-generator/KeyGenerator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":24},"end":{"line":5,"column":44}},"2":{"start":{"line":6,"column":19},"end":{"line":6,"column":29}},"3":{"start":{"line":7,"column":8},"end":{"line":9,"column":11}},"4":{"start":{"line":8,"column":12},"end":{"line":8,"column":51}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":71}},"7":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"8":{"start":{"line":16,"column":12},"end":{"line":16,"column":65}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":51}},"10":{"start":{"line":19,"column":8},"end":{"line":19,"column":40}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":24},"end":{"line":12,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":37},"end":{"line":7,"column":38}},"loc":{"start":{"line":7,"column":47},"end":{"line":9,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":45},"end":{"line":20,"column":5}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/key-generator/KeyGenerator.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/key-generator/KeyGenerator.ts"],"names":[],"mappings":";;AAMA,MAAa,mBAAmB;IAE5B,QAAQ,CAAC,GAAG,EAAE,IAAI;QACd,MAAM,OAAO,GAAG,oBAAoB,CAAC;QACrC,IAAI,IAAI,GAAG,UAAU,CAAC;QACtB,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,OAAO,EAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACnC,OAAO,WAAW,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,MAAM,CAAC;QAC3C,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,IAAI,CAAC;QACb,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACnE,CAAC;IAAA,CAAC;IAGF,QAAQ,CAAC,MAAW,EAAE,WAA4B,EAAE,IAAS,EAAE,GAAY;QACvE,IAAI,CAAC,GAAG,EAAE;YACN,OAAO,WAAW,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;SACvD;QACD,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;QAC1C,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;IACnC,CAAC;CAEJ;AArBD,kDAqBC","sourcesContent":["import { hashCode, hash } from '../utils';\n\nexport interface KeyGenerator {\n    generate(target: any, propertyKey: string | symbol, args: any, key?: string): string;\n}\n\nexport class DefaultKeyGenerator implements KeyGenerator {\n\n    template(tpl, data) {\n        const pattern = /\\$\\{([^\\}\\}]+)?\\}/g;\n        let body = 'return \"';\n        body += tpl.replace(pattern,  (m, g) =>{\n            return '\" + this.' + g.trim() + ' + \"';\n        });\n        body += '\";';\n        return new Function(body.replace(/[\\t\\n\\r]/g, '')).apply(data);\n    };\n\n\n    generate(target: any, propertyKey: string | symbol, args: any, key?: string): string {\n        if (!key) {\n            return propertyKey.toString() + JSON.stringify(args)\n        }\n        console.log('args:', JSON.stringify(args))\n        return this.template(key, args)\n    }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c64233accb7ae2ca96710f3506cb2f1f8726994","contentHash":"9b8ccf0aa6b887d2f29914abac13f07ba96be4d2c97e68c2241f8f56d3d90351"},"/home/jinfang/source-code/express-cache/src/lib/utils.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/utils.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":31}},"4":{"start":{"line":7,"column":4},"end":{"line":21,"column":6}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":41}},"6":{"start":{"line":9,"column":8},"end":{"line":19,"column":10}},"7":{"start":{"line":10,"column":12},"end":{"line":18,"column":15}},"8":{"start":{"line":11,"column":30},"end":{"line":11,"column":50}},"9":{"start":{"line":12,"column":28},"end":{"line":12,"column":65}},"10":{"start":{"line":13,"column":29},"end":{"line":13,"column":57}},"11":{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},"12":{"start":{"line":15,"column":20},"end":{"line":15,"column":80}},"13":{"start":{"line":17,"column":16},"end":{"line":17,"column":27}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":26}},"15":{"start":{"line":23,"column":0},"end":{"line":23,"column":26}},"16":{"start":{"line":32,"column":27},"end":{"line":32,"column":132}},"17":{"start":{"line":33,"column":27},"end":{"line":33,"column":39}},"18":{"start":{"line":34,"column":18},"end":{"line":34,"column":61}},"19":{"start":{"line":35,"column":17},"end":{"line":35,"column":94}},"20":{"start":{"line":36,"column":4},"end":{"line":37,"column":20}},"21":{"start":{"line":37,"column":8},"end":{"line":37,"column":20}},"22":{"start":{"line":38,"column":4},"end":{"line":38,"column":18}},"23":{"start":{"line":40,"column":0},"end":{"line":40,"column":38}},"24":{"start":{"line":42,"column":18},"end":{"line":42,"column":19}},"25":{"start":{"line":43,"column":4},"end":{"line":44,"column":23}},"26":{"start":{"line":44,"column":8},"end":{"line":44,"column":23}},"27":{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},"28":{"start":{"line":45,"column":17},"end":{"line":45,"column":18}},"29":{"start":{"line":46,"column":21},"end":{"line":46,"column":38}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":52}},"31":{"start":{"line":50,"column":8},"end":{"line":50,"column":36}},"32":{"start":{"line":52,"column":4},"end":{"line":52,"column":19}},"33":{"start":{"line":54,"column":0},"end":{"line":54,"column":28}},"34":{"start":{"line":56,"column":16},"end":{"line":56,"column":40}},"35":{"start":{"line":57,"column":4},"end":{"line":57,"column":20}},"36":{"start":{"line":58,"column":19},"end":{"line":58,"column":36}},"37":{"start":{"line":59,"column":4},"end":{"line":59,"column":18}},"38":{"start":{"line":61,"column":0},"end":{"line":61,"column":20}},"39":{"start":{"line":68,"column":4},"end":{"line":68,"column":96}},"40":{"start":{"line":70,"column":0},"end":{"line":70,"column":30}}},"fnMap":{"0":{"name":"Measure","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":16}},"loc":{"start":{"line":5,"column":28},"end":{"line":22,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":11},"end":{"line":7,"column":12}},"loc":{"start":{"line":7,"column":48},"end":{"line":21,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":27},"end":{"line":9,"column":28}},"loc":{"start":{"line":9,"column":39},"end":{"line":19,"column":9}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":10,"column":62},"end":{"line":10,"column":63}},"loc":{"start":{"line":10,"column":75},"end":{"line":18,"column":13}},"line":10},"4":{"name":"getParamNames","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":29},"end":{"line":39,"column":1}},"line":31},"5":{"name":"hashCode","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":17}},"loc":{"start":{"line":41,"column":23},"end":{"line":53,"column":1}},"line":41},"6":{"name":"hash","decl":{"start":{"line":55,"column":9},"end":{"line":55,"column":13}},"loc":{"start":{"line":55,"column":19},"end":{"line":60,"column":1}},"line":55},"7":{"name":"isPromise","decl":{"start":{"line":67,"column":9},"end":{"line":67,"column":18}},"loc":{"start":{"line":67,"column":26},"end":{"line":69,"column":1}},"line":67}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":30}},"type":"binary-expr","locations":[{"start":{"line":6,"column":16},"end":{"line":6,"column":25}},{"start":{"line":6,"column":29},"end":{"line":6,"column":30}}],"line":6},"1":{"loc":{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},"type":"if","locations":[{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},{"start":{"line":14,"column":16},"end":{"line":16,"column":17}}],"line":14},"2":{"loc":{"start":{"line":36,"column":4},"end":{"line":37,"column":20}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":37,"column":20}},{"start":{"line":36,"column":4},"end":{"line":37,"column":20}}],"line":36},"3":{"loc":{"start":{"line":43,"column":4},"end":{"line":44,"column":23}},"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":44,"column":23}},{"start":{"line":43,"column":4},"end":{"line":44,"column":23}}],"line":43},"4":{"loc":{"start":{"line":68,"column":11},"end":{"line":68,"column":95}},"type":"binary-expr","locations":[{"start":{"line":68,"column":11},"end":{"line":68,"column":18}},{"start":{"line":68,"column":22},"end":{"line":68,"column":59}},{"start":{"line":68,"column":63},"end":{"line":68,"column":95}}],"line":68}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":1,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":1,"5":0,"6":0,"7":0},"b":{"0":[0,0],"1":[0,0],"2":[0,1],"3":[0,0],"4":[0,0,0]},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/utils.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/utils.ts"],"names":[],"mappings":";;;AAAA,iCAAkC;AAElC,SAAgB,OAAO,CAAC,SAAS;IAC7B,SAAS,GAAG,SAAS,IAAI,CAAC,CAAA;IAC1B,OAAO,CAAC,MAAW,EAAE,WAA4B,EAAE,UAAwC,EAAgC,EAAE;QACzH,MAAM,QAAQ,GAAQ,UAAU,CAAC,KAAK,CAAC;QACvC,UAAU,CAAC,KAAK,GAAG;;gBACf,MAAM,KAAK,GAAW,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;gBAC3C,MAAM,GAAG,GAAQ,MAAM,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;gBACvD,MAAM,IAAI,GAAW,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC;gBAClD,IAAI,IAAI,GAAG,SAAS,EAAE;oBAClB,OAAO,CAAC,IAAI,CAAC,oBAAoB,IAAI,YAAY,IAAI,KAAK,CAAC,CAAC;iBAC/D;gBACD,OAAO,GAAG,CAAC;YACf,CAAC;SAAA,CAAC;QACF,OAAO,UAAU,CAAC;IACtB,CAAC,CAAA;AACL,CAAC;AAfD,0BAeC;AAGD;;;;;;GAMG;AACH,SAAgB,aAAa,CAAC,IAAI;IAC9B,MAAM,cAAc,GAAG,yGAAyG,CAAC;IACjI,MAAM,cAAc,GAAG,YAAY,CAAC;IACpC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;IAC1D,IAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IAC3F,IAAI,MAAM,KAAK,IAAI;QACf,MAAM,GAAG,EAAE,CAAC;IAChB,OAAO,MAAM,CAAC;AAClB,CAAC;AARD,sCAQC;AAED,SAAgB,QAAQ,CAAC,GAAW;IAChC,IAAI,OAAO,GAAG,CAAC,CAAC;IAChB,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC;QAAE,OAAO,OAAO,CAAC;IACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACjC,MAAM,IAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAC/B,uCAAuC;QACvC,OAAO,GAAG,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC;QAC5C,uCAAuC;QACvC,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC,2BAA2B;KAC3D;IACD,OAAO,OAAO,CAAC;AACnB,CAAC;AAXD,4BAWC;AAED,SAAgB,IAAI,CAAC,GAAW;IAC5B,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAA,yCAAyC;IAC9E,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAE,SAAS;IAC5C,OAAO,MAAM,CAAC;AAClB,CAAC;AALD,oBAKC;AAED;;;;GAIG;AACH,SAAgB,SAAS,CAAC,KAAU;IAChC,OAAO,CAAC,CAAC,KAAK,IAAI,OAAO,KAAK,CAAC,SAAS,KAAK,UAAU,IAAI,OAAO,KAAK,CAAC,IAAI,KAAK,UAAU,CAAC;AAChG,CAAC;AAFD,8BAEC","sourcesContent":["import crypto = require('crypto');\n\nexport function Measure(threshold): MethodDecorator {\n    threshold = threshold || 0\n    return (target: any, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> => {\n        const oldValue: any = descriptor.value;\n        descriptor.value = async function () {\n            const start: number = new Date().getTime();\n            const res: any = await oldValue.apply(this, arguments);\n            const time: number = new Date().getTime() - start;\n            if (time > threshold) {\n                console.info(`called function [${name}], take: ${time} ms`);\n            }\n            return res;\n        };\n        return descriptor;\n    }\n}\n\n\n/**\n * get parameter name for a function\n *\n * @export\n * @param {*} func\n * @returns name list\n */\nexport function getParamNames(func) {\n    const STRIP_COMMENTS = /(\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/)|(\\s*=[^,\\)]*(('(?:\\\\'|[^'\\r\\n])*')|(\"(?:\\\\\"|[^\"\\r\\n])*\"))|(\\s*=[^,\\)]*))/mg;\n    const ARGUMENT_NAMES = /([^\\s,]+)/g;\n    const fnStr = func.toString().replace(STRIP_COMMENTS, '');\n    let result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n    if (result === null)\n        result = [];\n    return result;\n}\n\nexport function hashCode(str: string) {\n    let hashStr = 0;\n    if (str.length === 0) return hashStr;\n    for (let i = 0; i < str.length; i++) {\n        const char = str.charCodeAt(i);\n        // tslint:disable-next-line: no-bitwise\n        hashStr = ((hashStr << 5) - hashStr) + char;\n        // tslint:disable-next-line: no-bitwise\n        hashStr = hashStr & hashStr; // Convert to 32bit integer\n    }\n    return hashStr;\n}\n\nexport function hash(str: string) {\n    const md5 = crypto.createHash('md5');// 定义加密方式:md5不可逆,此处的md5可以换成任意hash加密的方法名称；\n    md5.update(str);\n    const result = md5.digest('hex');  // 加密后的值d\n    return result;\n}\n\n/**\n * Tests to see if the object is an ES2015 (ES6) Promise\n * @see {@link https://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects}\n * @param value the object to test\n */\nexport function isPromise(value: any): value is PromiseLike<any> {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a2e6b4d9a4091e1c140ff1460423ba0399c8412d","contentHash":"708c22ae086f03f63c1a69f5d4c0d98219777a94d5374acb5f2be0116cef67b3"},"/home/jinfang/source-code/express-cache/src/lib/impl/no-op-cache.ts":{"path":"/home/jinfang/source-code/express-cache/src/lib/impl/no-op-cache.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":25}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":51}},"3":{"start":{"line":17,"column":8},"end":{"line":17,"column":25}},"4":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":22},"end":{"line":6,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":11},"end":{"line":9,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":12},"end":{"line":12,"column":5}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":15},"end":{"line":15,"column":5}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":5}},"line":16},"5":{"name":"(anonymous_5)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":20},"end":{"line":21,"column":5}},"line":20}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/jinfang/source-code/express-cache/src/lib/impl/no-op-cache.ts","sources":["/home/jinfang/source-code/express-cache/src/lib/impl/no-op-cache.ts"],"names":[],"mappings":";;AAEA,MAAa,SAAS;IAIpB,YAAY,IAAY;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IACD,IAAI;QACF,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC7C,CAAC;IAED,qCAAqC;IACrC,KAAK;IACL,CAAC;IAED,qCAAqC;IACrC,KAAK,CAAC,GAAW;IACjB,CAAC;IAED,GAAG,CAAI,GAAW;QAChB,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,qCAAqC;IACrC,GAAG,CAAI,GAAW,EAAE,KAAQ;IAC5B,CAAC;CACF;AA1BD,8BA0BC","sourcesContent":["import {Cache} from '../CacheModel';\n\nexport class NoOpCache implements Cache {\n\n  readonly name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n  keys(): string[] | Promise<string[]> {\n    throw new Error('Method not implemented.');\n  }\n\n  // tslint:disable-next-line: no-empty\n  clear(): void {\n  }\n\n  // tslint:disable-next-line: no-empty\n  evict(key: string): void {\n  }\n\n  get<T>(key: string): T {\n    return undefined;\n  }\n\n  // tslint:disable-next-line: no-empty\n  put<T>(key: string, value: T): void {\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2617336ce47052aa17f4698b7f91a57cfbf64a9b","contentHash":"8f649a3e45bae25f64c77ff79ae42377bc4d28f577bb1437ef4883eee199a9df"}}